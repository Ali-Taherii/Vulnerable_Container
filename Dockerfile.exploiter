# Use a lightweight base image
FROM debian:bullseye-slim

FROM python:3.8-slim

# Install necessary tools
RUN apt-get update && apt-get install -y \
    build-essential \
    libssl-dev \
    libffi-dev \
    python3-dev \
    python3 \
    openssh-client \
    gcc \
    python3-pip \
    snmp \
    nmap \
    hydra \
    net-tools \
    curl \
    && apt-get clean && rm -rf /var/lib/apt/lists/*


# Install the compatible paramiko version
RUN pip install paramiko==2.4.2 six pysnmp cryptography==3.4

# Copy exploit scripts into the container
COPY ssh_enum.py /opt/ssh_enum.py
COPY userlist.txt /opt/userlist.txt 
COPY snmp_enum.py /opt/snmp_enum.py

# Make the exploit script executable
RUN chmod +x /opt/ssh_enum.py
RUN chmod +x /opt/snmp_enum.py

# Set the working directory
WORKDIR /opt

# Default command (choose which script to run or provide options)
CMD ["bash"]
